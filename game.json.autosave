{"firstLayout":"","gdVersion":{"build":99,"major":4,"minor":0,"revision":0},"properties":{"adaptGameResolutionAtRuntime":false,"folderProject":false,"orientation":"default","packageName":"com.example.snap","projectUuid":"3319d892-0cb4-4437-8568-6fe5fff4c5ff","scaleMode":"linear","sizeOnStartupMode":"","useExternalSourceFiles":false,"version":"1.0.0","name":"SnapToGrid","author":"@Lizard-13, D8H","windowWidth":1140,"windowHeight":1980,"latestCompilationDirectory":"","maxFPS":60,"minFPS":20,"verticalSync":false,"platformSpecificAssets":{},"loadingScreen":{"backgroundColor":0,"backgroundFadeInDuration":0.2,"backgroundImageResourceName":"","gdevelopLogoStyle":"light","logoAndProgressFadeInDuration":0.2,"logoAndProgressLogoFadeInDelay":0.2,"minDuration":1.5,"progressBarColor":16777215,"progressBarHeight":20.0,"progressBarMaxWidth":200.0,"progressBarMinWidth":40.0,"progressBarWidthPercent":30.0,"showGDevelopSplash":true,"showProgressBar":true},"extensionProperties":[],"platforms":[{"name":"GDevelop JS platform"}],"currentPlatform":"GDevelop JS platform"},"resources":{"resources":[{"alwaysLoaded":false,"file":"assets/YellowBubble.png","kind":"image","metadata":"","name":"YellowBubble.png","smoothed":true,"userAdded":false},{"alwaysLoaded":false,"file":"assets/GreenBubble.png","kind":"image","metadata":"","name":"GreenBubble.png","smoothed":true,"userAdded":false},{"alwaysLoaded":false,"file":"assets/BlueBubble.png","kind":"image","metadata":"","name":"BlueBubble.png","smoothed":true,"userAdded":false},{"alwaysLoaded":false,"file":"assets/PurpuleBubble.png","kind":"image","metadata":"","name":"PurpuleBubble.png","smoothed":true,"userAdded":false},{"alwaysLoaded":false,"file":"assets/RedBubble.png","kind":"image","metadata":"","name":"RedBubble.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"assets/YellowHexagon.png","kind":"image","metadata":"","name":"YellowHexagon.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"assets/GreenHexagon.png","kind":"image","metadata":"","name":"GreenHexagon.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"assets/BlueHexagon.png","kind":"image","metadata":"","name":"BlueHexagon.png","smoothed":true,"userAdded":false},{"alwaysLoaded":false,"file":"assets/PurpleHexagon.png","kind":"image","metadata":"","name":"PurpleHexagon.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"assets/RedHexagon.png","kind":"image","metadata":"","name":"RedHexagon.png","smoothed":true,"userAdded":false},{"alwaysLoaded":false,"file":"assets/Button.png","kind":"image","metadata":"","name":"Button.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"assets/Background.png","kind":"image","metadata":"","name":"assets\\Background.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"assets/Slots.png","kind":"image","metadata":"","name":"assets\\Slots.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"assets/board.png","kind":"image","metadata":"","name":"assets\\board.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"assets/gem_0.png","kind":"image","metadata":"","name":"assets\\gem_0.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"assets/gem_1.png","kind":"image","metadata":"","name":"assets\\gem_1.png","smoothed":true,"userAdded":false},{"alwaysLoaded":false,"file":"assets/gem_2.png","kind":"image","metadata":"","name":"assets\\gem_2.png","smoothed":true,"userAdded":false},{"alwaysLoaded":false,"file":"assets/gem_3.png","kind":"image","metadata":"","name":"assets\\gem_3.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"assets/gem_4.png","kind":"image","metadata":"","name":"assets\\gem_4.png","smoothed":true,"userAdded":true},{"alwaysLoaded":false,"file":"assets/gem_5.png","kind":"image","metadata":"","name":"assets\\gem_5.png","smoothed":true,"userAdded":true}],"resourceFolders":[]},"objects":[],"objectsGroups":[],"variables":[],"layouts":[{"b":27,"disableInputWhenNotFocused":true,"mangledName":"RectangularGridScene","name":"RectangularGridScene","oglFOV":90.0,"oglZFar":500.0,"oglZNear":1.0,"r":54,"standardSortMethod":false,"stopSoundsOnStartup":true,"title":"","v":46,"uiSettings":{"grid":true,"gridB":80,"gridG":80,"gridHeight":152.0,"gridOffsetX":110.0,"gridOffsetY":75.0,"gridR":80,"gridType":"rectangular","gridWidth":152.0,"snap":true,"windowMask":false,"zoomFactor":0.2074250088691721},"objectsGroups":[{"name":"Bubble","objects":[]},{"name":"Gem","objects":[{"name":"GreenGem"},{"name":"DarkBlueGem"},{"name":"LightBlueGem"},{"name":"PurpleGem"},{"name":"YellowGem"},{"name":"RedGem"}]}],"variables":[{"name":"indexX","type":"number","value":0.0},{"name":"indexY","type":"number","value":2.0},{"name":"generateRandomColor","type":"number","value":0.0},{"name":"GemColors","type":"array","children":[{"type":"string","value":"YellowGem"},{"type":"string","value":"DarkBlueGem"},{"type":"string","value":"LightBlueGem"},{"type":"string","value":"PurpleGem"},{"type":"string","value":"GreenGem"},{"type":"string","value":"RedGem"}]}],"instances":[{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"Drawer","persistentUuid":"13c94edc-6f60-4c06-ace4-94b117c33ce5","width":0.0,"x":296.0,"y":104.0,"zOrder":3,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":true,"height":1980.0,"layer":"","locked":false,"name":"bg","persistentUuid":"141c9cd0-b559-4107-a636-1903ddbc207b","width":1140.0,"x":0.0,"y":0.0,"zOrder":0,"numberProperties":[],"stringProperties":[],"initialVariables":[]},{"angle":0.0,"customSize":false,"height":0.0,"layer":"","locked":false,"name":"board","persistentUuid":"0d972b0c-6f31-4ce7-917b-5cfa4bcd061e","width":0.0,"x":110.0,"y":525.0,"zOrder":1,"numberProperties":[],"stringProperties":[],"initialVariables":[]}],"objects":[{"name":"Drawer","tags":"","type":"PrimitiveDrawing::Drawer","variables":[],"effects":[],"behaviors":[],"fillOpacity":255.0,"outlineSize":0,"outlineOpacity":255.0,"fillColor":{"b":89,"g":89,"r":91},"outlineColor":{"b":0,"g":0,"r":0},"absoluteCoordinates":true,"clearBetweenFrames":false},{"name":"bg","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"assets\\Background.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"board","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"assets\\board.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"GreenGem","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[{"name":"Draggable","type":"DraggableBehavior::Draggable"}],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"assets\\gem_0.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"DarkBlueGem","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[{"name":"Draggable","type":"DraggableBehavior::Draggable"}],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"assets\\gem_1.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"LightBlueGem","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[{"name":"Draggable","type":"DraggableBehavior::Draggable"}],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"assets\\gem_2.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"PurpleGem","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[{"name":"Draggable","type":"DraggableBehavior::Draggable"}],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"assets\\gem_3.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"YellowGem","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[{"name":"Draggable","type":"DraggableBehavior::Draggable"}],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"assets\\gem_4.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]},{"name":"RedGem","tags":"","type":"Sprite","updateIfNotVisible":false,"variables":[],"effects":[],"behaviors":[{"name":"Draggable","type":"DraggableBehavior::Draggable"}],"animations":[{"name":"","useMultipleDirections":false,"directions":[{"looping":false,"timeBetweenFrames":0.08,"sprites":[{"hasCustomCollisionMask":false,"image":"assets\\gem_5.png","points":[],"originPoint":{"name":"origine","x":0.0,"y":0.0},"centerPoint":{"automatic":true,"name":"centre","x":0.0,"y":0.0},"customCollisionMask":[]}]}]}]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"DepartScene"},"parameters":[""],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"BuiltinExternalLayouts::CreateObjectsFromExternalLayout"},"parameters":["","\"UI\"","0","0"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["cellWidth","=","152"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["cellHeight","=","152"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["offsetX","=","110"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["offsetY","=","75"],"subInstructions":[]}],"events":[{"colorB":228,"colorG":176,"colorR":74,"creationTime":0,"disabled":false,"folded":false,"name":"Draw the grid","source":"","type":"BuiltinCommonInstructions::Group","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["lineIndex","=","0"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Repeat","repeatExpression":"SceneWindowWidth() / Variable(cellWidth)","conditions":[],"actions":[{"type":{"inverted":false,"value":"PrimitiveDrawing::Line"},"parameters":["Drawer","Variable(cellWidth) * Variable(lineIndex) + Variable(offsetX)","0","Variable(cellWidth) * Variable(lineIndex) + Variable(offsetX)","SceneWindowHeight()","1"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["lineIndex","+","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["lineIndex","=","0"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Repeat","repeatExpression":"SceneWindowHeight() / Variable(cellHeight)","conditions":[],"actions":[{"type":{"inverted":false,"value":"PrimitiveDrawing::Line"},"parameters":["Drawer","0","Variable(cellHeight) * Variable(lineIndex) + Variable(offsetY)","SceneWindowWidth()","Variable(cellHeight) * Variable(lineIndex) + Variable(offsetY)","1"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["lineIndex","+","1"],"subInstructions":[]}],"events":[]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Repeat","repeatExpression":"6","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["indexY","+","1"],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["indexX","=","0"],"subInstructions":[]}],"events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Repeat","repeatExpression":"6","conditions":[],"actions":[{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["generateRandomColor","=","RandomInRange(0, 5)"],"subInstructions":[]},{"type":{"inverted":false,"value":"CreateByName"},"parameters":["","Gem","VariableString(GemColors[Variable(generateRandomColor)])","Variable(cellWidth) * Variable(indexX) + Variable(offsetX)","Variable(cellHeight) * Variable(indexY) + Variable(offsetY)","\"\""],"subInstructions":[]},{"type":{"inverted":false,"value":"ModVarScene"},"parameters":["indexX","+","1"],"subInstructions":[]}],"events":[]}]}],"parameters":[]}]},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Snap the dragged object to the in-game grid. It's not related to the grid used in the scene editor.","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[{"type":{"inverted":false,"value":"DraggableBehavior::Dragged"},"parameters":["Gem","Draggable"],"subInstructions":[]}],"actions":[{"type":{"inverted":false,"value":"SnapToGrid::SnapObjectToVirtualGrid"},"parameters":["","Gem","Variable(cellWidth)","Variable(cellHeight)","Variable(offsetX)","Variable(offsetY)",""],"subInstructions":[]}],"events":[]}],"layers":[{"ambientLightColorB":200,"ambientLightColorG":200,"ambientLightColorR":200,"followBaseLayerCamera":false,"isLightingLayer":false,"name":"","visibility":true,"cameras":[{"defaultSize":true,"defaultViewport":true,"height":0.0,"viewportBottom":1.0,"viewportLeft":0.0,"viewportRight":1.0,"viewportTop":0.0,"width":0.0}],"effects":[]}],"behaviorsSharedData":[]}],"externalEvents":[],"eventsFunctionsExtensions":[{"author":"@Lizard-13","description":"An action which, when applied on some objects, snap these objects to a *virtual grid*, with cells having customizable width and height.\n\nUseful for level editors or putting objects on a tiled based map (RPG, strategy games, or any tiled based game in general).","extensionNamespace":"","fullName":"Snap objects to a virtual grid","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXZpZXctZ3JpZC1wbHVzLW91dGxpbmUiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMyAyMUgxMVYxM0gzTTUgMTVIOVYxOUg1TTMgMTFIMTFWM0gzTTUgNUg5VjlINU0xMyAzVjExSDIxVjNNMTkgOUgxNVY1SDE5TTE4IDE2SDIxVjE4SDE4VjIxSDE2VjE4SDEzVjE2SDE2VjEzSDE4WiIgLz48L3N2Zz4=","name":"SnapToGrid","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/view-grid-plus-outline.svg","shortDescription":"Action to snap objects to a virtual grid during the game.","version":"0.0.3","tags":["snap","grid","positioning","tiles"],"dependencies":[],"eventsFunctions":[{"description":"Snap object to a virtual grid (i.e: this is not the grid used in the editor)","fullName":"Snap objects to a virtual grid","functionType":"Action","name":"SnapObjectToVirtualGrid","private":false,"sentence":"Snap _PARAM1_ to a virtual grid using cells with  width: _PARAM2_px, height _PARAM3_px and an offset position (_PARAM4_; _PARAM5_)","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Round the Object position to snap to the in-game grid","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"MettreXY"},"parameters":["Object","=","GetArgumentAsNumber(\"CellWidth\") * round((Object.X() - GetArgumentAsNumber(\"OffsetX\")) / GetArgumentAsNumber(\"CellWidth\")) + GetArgumentAsNumber(\"OffsetX\")","=","GetArgumentAsNumber(\"CellHeight\") * round((Object.Y() - GetArgumentAsNumber(\"OffsetY\")) / GetArgumentAsNumber(\"CellHeight\")) + GetArgumentAsNumber(\"OffsetY\")"],"subInstructions":[]}],"events":[]}],"parameters":[{"codeOnly":false,"defaultValue":"","description":"Objects to snap to the virtual grid","longDescription":"","name":"Object","optional":false,"supplementaryInformation":"","type":"objectList"},{"codeOnly":false,"defaultValue":"","description":"Width of a cell of the virtual grid (in pixels)","longDescription":"","name":"CellWidth","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Height of a cell of the virtual grid (in pixels)","longDescription":"","name":"CellHeight","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Offset on the X axis of the virtual grid (in pixels)","longDescription":"","name":"OffsetX","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Offset on the Y axis of the virtual grid (in pixels)","longDescription":"","name":"OffsetY","optional":false,"supplementaryInformation":"","type":"expression"}],"objectGroups":[]}],"eventsBasedBehaviors":[]},{"author":"D8H","description":"An action which, when applied on some objects, snap these objects to a *virtual grid*, with cells having customizable width and height.\n\nUseful for level editors or putting objects on a tiled based map (RPG, strategy games, or any tiled based game in general).","extensionNamespace":"","fullName":"Hexagonal grid","helpPath":"","iconUrl":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWhleGFnb24tbXVsdGlwbGUtb3V0bGluZSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik05LjM3IDRMMTAuNzggNi41TDkuMzcgOUg2LjYzTDUuMjMgNi41TDYuNjMgNEg5LjM3TTEwLjI1IDJINS43NUM1LjU2IDIgNS4zOSAyLjExIDUuMzEgMi4yNkwzLjA5IDYuMjJMMyA2LjVMMy4wOSA2Ljc4TDUuMzEgMTAuNzRDNS4zOSAxMC44OSA1LjU2IDExIDUuNzUgMTFIMTAuMjVDMTAuNDQgMTEgMTAuNjEgMTAuODkgMTAuNjkgMTAuNzRMMTIuOTEgNi43OEwxMyA2LjVMMTIuOTEgNi4yMkwxMC42OSAyLjI2QzEwLjYxIDIuMTEgMTAuNDQgMiAxMC4yNSAyTTE4LjYyIDkuNUwyMCAxMkwxOC42MiAxNC41SDE1Ljg4TDE0LjUgMTJMMTUuODggOS41SDE4LjYyTTE5LjUgNy41SDE1QzE0LjgxIDcuNSAxNC42NCA3LjYxIDE0LjU2IDcuNzZMMTIuMzQgMTEuNzJMMTIuMjUgMTJMMTIuMzQgMTIuMjhMMTQuNTYgMTYuMjRDMTQuNjQgMTYuMzkgMTQuODEgMTYuNSAxNSAxNi41SDE5LjVDMTkuNjkgMTYuNSAxOS44NiAxNi4zOSAxOS45NCAxNi4yNEwyMi4xNiAxMi4yOEwyMi4yNSAxMkwyMi4xNiAxMS43MkwxOS45NCA3Ljc2QzE5Ljg2IDcuNjEgMTkuNjkgNy41IDE5LjUgNy41TTkuMzcgMTVMMTAuNzggMTcuNUw5LjM3IDIwSDYuNjNMNS4yMyAxNy41TDYuNjMgMTVIOS4zN00xMC4yNSAxM0g1Ljc1QzUuNTYgMTMgNS4zOSAxMy4xMSA1LjMxIDEzLjI2TDMuMDkgMTcuMjJMMyAxNy41TDMuMDkgMTcuNzhMNS4zMSAyMS43NEM1LjM5IDIxLjg5IDUuNTYgMjIgNS43NSAyMkgxMC4yNUMxMC40NCAyMiAxMC42MSAyMS44OSAxMC42OSAyMS43NEwxMi45MSAxNy43OEwxMyAxNy41TDEyLjkxIDE3LjIyTDEwLjY5IDEzLjI2QzEwLjYxIDEzLjExIDEwLjQ0IDEzIDEwLjI1IDEzWiIgLz48L3N2Zz4=","name":"HexagonalGrid","previewIconUrl":"https://resources.gdevelop-app.com/assets/Icons/hexagon-multiple-outline.svg","shortDescription":"Action to snap objects to a virtual hexagonal grid during the game.","version":"0.0.1","tags":["hexagon","bubble","grid","snap","positioning"],"dependencies":[],"eventsFunctions":[{"description":"Snap object to a virtual pointy topped hexagonal grid (this is not the grid used in the editor)","fullName":"Snap objects to a virtual pointy topped hexagonal grid","functionType":"Action","name":"SnapObjectToPointyToppedHexagonalGrid","private":false,"sentence":"Snap _PARAM1_ to a virtual pointy topped hexagonal grid using cells with width: _PARAM2_px, height _PARAM3_px and an offset position (_PARAM4_; _PARAM5_)","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::JsCode","inlineCode":"// Insired from: https://www.redblobgames.com/grids/hexagons\n\nconst cellWidth = eventsFunctionContext.getArgument(\"CellWidth\");\nconst cellHeight = eventsFunctionContext.getArgument(\"CellHeight\");\nconst offsetX = eventsFunctionContext.getArgument(\"OffsetX\");\nconst offsetY = eventsFunctionContext.getArgument(\"OffsetY\");\n\nfor (const object of objects)\n{\n    // Find the hexagon cube coordinates for a given position \n\n    // The following is a simplified version of this:\n    //\n    // const x = (object.getX() - offsetX) * Math.sqrt(3) / cellWidth;\n    // const y = (object.getY() - offsetY) * 2 / cellHeight;\n    //\n    // const cubeX = Math.sqrt(3) / 3 * x  -  1/3 * y;\n    // const cubeZ =                          2/3 * y;\n\n    const x = (object.getX() - offsetX) / cellWidth;\n    const y = (object.getY() - offsetY) / cellHeight;\n\n    const cubeX = x - 2/3 * y;\n    const cubeZ =     4/3 * y;\n    const cubeY = -cubeX - cubeZ;\n\n    let roundX = Math.round(cubeX);\n    let roundY = Math.round(cubeY);\n    let roundZ = Math.round(cubeZ);\n\n    const deltaX = Math.abs(roundX - cubeX);\n    const deltaY = Math.abs(roundY - cubeY);\n    const deltaZ = Math.abs(roundZ - cubeZ);\n\n    if (deltaX > deltaY && deltaX > deltaZ)\n    {\n        roundX = -roundY - roundZ;\n    }\n    else if (deltaY > deltaZ)\n    {\n        roundY = -roundX - roundZ;\n    }\n    else\n    {\n        roundZ = -roundX - roundY;\n    }\n\n    // Hexagon cube coordinates to hexagon position\n\n    // The following is a simplified version of this:\n    //\n    // const positionX = Math.sqrt(3) * roundX  + Math.sqrt(3)/2 * roundZ;\n    // const positionY =                          3/2 * roundZ;\n    //\n    // object.setX(positionX * cellWidth / Math.sqrt(3) + offsetX);\n    // object.setY(positionY * cellHeight / 2 + offsetY);\n\n    const positionX = roundX + 1/2 * roundZ;\n    const positionY =          3/4 * roundZ;\n\n    object.setX(positionX * cellWidth + offsetX);\n    object.setY(positionY * cellHeight + offsetY);\n}","parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"codeOnly":false,"defaultValue":"","description":"Objects to snap to the virtual grid","longDescription":"","name":"Object","optional":false,"supplementaryInformation":"","type":"objectList"},{"codeOnly":false,"defaultValue":"","description":"Width of a cell of the virtual grid (in pixels)","longDescription":"","name":"CellWidth","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Height of a cell of the virtual grid (in pixels)","longDescription":"The actual row height will be 3/4 of this.","name":"CellHeight","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Offset on the X axis of the virtual grid (in pixels)","longDescription":"","name":"OffsetX","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Offset on the Y axis of the virtual grid (in pixels)","longDescription":"Odd rows are shifted from half a cell, use a \"CellHeight * 3/4\" offset to make it the other way.","name":"OffsetY","optional":false,"supplementaryInformation":"","type":"expression"}],"objectGroups":[]},{"description":"Snap object to a virtual flat topped hexagonal grid (this is not the grid used in the editor)","fullName":"Snap objects to a virtual flat topped hexagonal grid","functionType":"Action","name":"SnapObjectToFlatToppedHexagonalGrid","private":false,"sentence":"Snap _PARAM1_ to a virtual flat topped hexagonal grid using cells with width: _PARAM2_px, height _PARAM3_px and an offset position (_PARAM4_; _PARAM5_)","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"Note: this is the exact same code as for pointy topped hexagonal grid with x and y swapped.","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::JsCode","inlineCode":"// Insired from: https://www.redblobgames.com/grids/hexagons\n\nconst cellHeight = eventsFunctionContext.getArgument(\"CellWidth\");\nconst cellWidth = eventsFunctionContext.getArgument(\"CellHeight\");\nconst offsetY = eventsFunctionContext.getArgument(\"OffsetX\");\nconst offsetX = eventsFunctionContext.getArgument(\"OffsetY\");\n\nfor (const object of objects)\n{\n    // Find the hexagon cube coordinates for a given position \n\n    // The following is a simplified version of this:\n    //\n    // const x = (object.getX() - offsetX) * Math.sqrt(3) / cellWidth;\n    // const y = (object.getY() - offsetY) * 2 / cellHeight;\n    //\n    // const cubeX = Math.sqrt(3) / 3 * x  -  1/3 * y;\n    // const cubeZ =                          2/3 * y;\n\n    const x = (object.getY() - offsetX) / cellWidth;\n    const y = (object.getX() - offsetY) / cellHeight;\n\n    const cubeX = x - 2/3 * y;\n    const cubeZ =     4/3 * y;\n    const cubeY = -cubeX - cubeZ;\n\n    let roundX = Math.round(cubeX);\n    let roundY = Math.round(cubeY);\n    let roundZ = Math.round(cubeZ);\n\n    const deltaX = Math.abs(roundX - cubeX);\n    const deltaY = Math.abs(roundY - cubeY);\n    const deltaZ = Math.abs(roundZ - cubeZ);\n\n    if (deltaX > deltaY && deltaX > deltaZ)\n    {\n        roundX = -roundY - roundZ;\n    }\n    else if (deltaY > deltaZ)\n    {\n        roundY = -roundX - roundZ;\n    }\n    else\n    {\n        roundZ = -roundX - roundY;\n    }\n\n    // Hexagon cube coordinates to hexagon position\n\n    // The following is a simplified version of this:\n    //\n    // const positionX = Math.sqrt(3) * roundX  + Math.sqrt(3)/2 * roundZ;\n    // const positionY =                          3/2 * roundZ;\n    //\n    // object.setX(positionX * cellWidth / Math.sqrt(3) + offsetX);\n    // object.setY(positionY * cellHeight / 2 + offsetY);\n\n    const positionX = roundX + 1/2 * roundZ;\n    const positionY =          3/4 * roundZ;\n\n    object.setY(positionX * cellWidth + offsetX);\n    object.setX(positionY * cellHeight + offsetY);\n}","parameterObjects":"Object","useStrict":true,"eventsSheetExpanded":true}],"parameters":[{"codeOnly":false,"defaultValue":"","description":"Objects to snap to the virtual grid","longDescription":"","name":"Object","optional":false,"supplementaryInformation":"","type":"objectList"},{"codeOnly":false,"defaultValue":"","description":"Width of a cell of the virtual grid (in pixels)","longDescription":"The actual column width will be 3/4 of this.","name":"CellWidth","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Height of a cell of the virtual grid (in pixels)","longDescription":"","name":"CellHeight","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Offset on the X axis of the virtual grid (in pixels)","longDescription":"Odd columns are shifted from half a cell, use a \"CellHeight * 3/4\" offset to make it the other way.","name":"OffsetX","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Offset on the Y axis of the virtual grid (in pixels)","longDescription":"","name":"OffsetY","optional":false,"supplementaryInformation":"","type":"expression"}],"objectGroups":[]},{"description":"Snap object to a virtual bubble grid (this is not the grid used in the editor)","fullName":"Snap objects to a virtual bubble grid","functionType":"Action","name":"SnapObjectToBubbleGrid","private":false,"sentence":"Snap _PARAM1_ to a virtual bubble grid using cells with width: _PARAM2_px, height _PARAM3_px and an offset position (_PARAM4_; _PARAM5_)","events":[{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Comment","color":{"b":109,"g":230,"r":255,"textB":0,"textG":0,"textR":0},"comment":"This grid is like bottles stacking, odd lines are shifted from half a cell. \n\nOn an hexagonal grid a line height is 3/4 of sprite height but with bubbles it is sin(60°) that is around 0.866 which is near 7/8 = 0.875\n(7/6)/(3/4) = 7/6\nUsing this ratio, the cellHeigt gives the 7/8 line height and this allows integer position as assets are often a multiple of 8.","comment2":""},{"disabled":false,"folded":false,"type":"BuiltinCommonInstructions::Standard","conditions":[],"actions":[{"type":{"inverted":false,"value":"HexagonalGrid::SnapObjectToPointyToppedHexagonalGrid"},"parameters":["","Object","GetArgumentAsNumber(\"CellWidth\")","GetArgumentAsNumber(\"CellHeight\") * 7/6","GetArgumentAsNumber(\"OffsetX\")","GetArgumentAsNumber(\"OffsetY\")",""],"subInstructions":[]}],"events":[]}],"parameters":[{"codeOnly":false,"defaultValue":"","description":"Objects to snap to the virtual grid","longDescription":"","name":"Object","optional":false,"supplementaryInformation":"","type":"objectList"},{"codeOnly":false,"defaultValue":"","description":"Width of a cell of the virtual grid (in pixels)","longDescription":"","name":"CellWidth","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Height of a cell of the virtual grid (in pixels)","longDescription":"The actual row height will be 7/8 of this.","name":"CellHeight","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Offset on the X axis of the virtual grid (in pixels)","longDescription":"","name":"OffsetX","optional":false,"supplementaryInformation":"","type":"expression"},{"codeOnly":false,"defaultValue":"","description":"Offset on the Y axis of the virtual grid (in pixels)","longDescription":"Odd rows are shifted from half a cell, use a \"CellHeight * 7/8\" offset to make it the other way","name":"OffsetY","optional":false,"supplementaryInformation":"","type":"expression"}],"objectGroups":[]}],"eventsBasedBehaviors":[]}],"externalLayouts":[{"associatedLayout":"RectangularGridScene","name":"UI","instances":[],"editionSettings":{"grid":true,"gridB":255,"gridG":180,"gridHeight":10.0,"gridOffsetX":0.0,"gridOffsetY":0.0,"gridR":158,"gridType":"rectangular","gridWidth":10.0,"snap":true,"windowMask":false,"zoomFactor":0.8399999999999994}}],"externalSourceFiles":[]}